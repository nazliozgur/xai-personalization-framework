# XAE-Frame Environment Variables
# Copy this file to .env and fill in your values
# Usage: cp .env.example .env

# PROJECT SETTINGS
PROJECT_NAME=XAE-Frame
ENVIRONMENT=development  # development, staging, production
DEBUG=true
LOG_LEVEL=INFO  # DEBUG, INFO, WARNING, ERROR, CRITICAL

# DATABASE CONFIGURATION
POSTGRES_USER=xaeframe
POSTGRES_PASSWORD=xaeframe_secure_password  # CHANGE THIS IN PRODUCTION!
POSTGRES_DB=xaeframe
POSTGRES_HOST=postgres  # Use 'localhost' if running outside Docker
POSTGRES_PORT=5432

DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# MLFLOW CONFIGURATION
MLFLOW_TRACKING_URI=http://mlflow:5000  # Use http://localhost:5000 outside Docker
MLFLOW_EXPERIMENT_NAME=xae-frame-experiments
MLFLOW_ARTIFACT_LOCATION=/mlflow/artifacts

# API CONFIGURATION
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_RELOAD=true  # Set to false in production

# CORS Settings
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8501
ALLOWED_METHODS=GET,POST,PUT,DELETE
ALLOWED_HEADERS=*

# DASHBOARD CONFIGURATION
DASHBOARD_PORT=8501
API_URL=http://api:8000  # Use http://localhost:8000 outside Docker

# REDIS CONFIGURATION (Optional)
# REDIS_HOST=redis
# REDIS_PORT=6379
# REDIS_DB=0
# REDIS_PASSWORD=
# REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# MODEL CONFIGURATION
MODEL_TYPE=lightgbm  # lightgbm, xgboost, catboost
MODEL_VERSION=v1.0.0
MODEL_REGISTRY_PATH=/app/models
MAX_MODEL_AGE_DAYS=30  # Trigger retraining after this many days

# Drift Detection
DRIFT_DETECTION_ENABLED=true
DRIFT_CHECK_INTERVAL_HOURS=24
DRIFT_THRESHOLD=0.05

# Retraining Strategy
AUTO_RETRAIN_ENABLED=true
RETRAIN_PERFORMANCE_THRESHOLD=0.80  # Retrain if accuracy drops below this
RETRAIN_DATA_WINDOW_DAYS=90

# EXPLAINABILITY (XAI) CONFIGURATION
XAI_ENGINE=shap  # shap, lime
SHAP_SAMPLE_SIZE=100  # Number of samples for SHAP calculation
EXPLANATION_CACHE_ENABLED=true
EXPLANATION_CACHE_TTL_SECONDS=3600

# Confidence Thresholds
CONFIDENCE_THRESHOLD_HIGH=0.90
CONFIDENCE_THRESHOLD_MEDIUM=0.70
CONFIDENCE_THRESHOLD_LOW=0.50

# Out-of-Distribution Detection
OOD_DETECTION_ENABLED=true
OOD_THRESHOLD=0.05

# FAIRNESS & ETHICS CONFIGURATION
FAIRNESS_MONITORING_ENABLED=true
FAIRNESS_METRICS=demographic_parity,equal_opportunity,disparate_impact
PROTECTED_ATTRIBUTES=gender,age,race  # Adjust based on your domain

# Bias Mitigation
BIAS_MITIGATION_STRATEGY=preprocessing  # preprocessing, inprocessing, postprocessing
FAIRNESS_THRESHOLD=0.80  # Minimum acceptable fairness score

# EU AI Act Compliance
EU_AI_ACT_COMPLIANCE_ENABLED=true
COMPLIANCE_REPORT_SCHEDULE=weekly  # daily, weekly, monthly

# BUSINESS IMPACT TRACKING
BUSINESS_METRICS_ENABLED=true
AB_TEST_ENABLED=true
CONTROL_GROUP_PERCENTAGE=0.20  # 20% control group

# Metric Tracking
TRACK_CONVERSION_RATE=true
TRACK_CHURN_RATE=true
TRACK_REVENUE_IMPACT=true
TRACK_CUSTOMER_SATISFACTION=true

# DATA CONFIGURATION
DATA_DIR=/app/data
RAW_DATA_DIR=/app/data/raw
PROCESSED_DATA_DIR=/app/data/processed

# Dataset Settings
DATASET_NAME=amazon_reviews_2023
DATASET_CATEGORY=Electronics  # For Amazon Reviews
DATASET_SAMPLE_SIZE=100000  # Set to 0 to use full dataset

# Feature Engineering
FEATURE_ENGINEERING_ENABLED=true
TEXT_VECTORIZATION_METHOD=tfidf  # tfidf, word2vec, bert
MAX_FEATURES=5000

# AUTHENTICATION & SECURITY
SECRET_KEY=your-secret-key-here-CHANGE-THIS-IN-PRODUCTION
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# API Keys (if needed for external services)
# HUGGINGFACE_TOKEN=your-hf-token
# OPENAI_API_KEY=your-openai-key

# MONITORING & LOGGING
LOG_FORMAT=json  # json, text
LOG_FILE=/app/logs/xae-frame.log
LOG_ROTATION=1 day
LOG_RETENTION=30 days

# Sentry (Optional error tracking)
# SENTRY_DSN=your-sentry-dsn

# EXTERNAL SERVICES (Optional)
# Weights & Biases (Alternative to MLflow)
# WANDB_API_KEY=your-wandb-key
# WANDB_PROJECT=xae-frame
# WANDB_ENTITY=your-entity

# Apache Kafka (For event streaming)
# KAFKA_BOOTSTRAP_SERVERS=localhost:9092
# KAFKA_TOPIC_PREDICTIONS=xae-predictions
# KAFKA_TOPIC_FEEDBACK=xae-feedback

# TESTING & DEVELOPMENT
TEST_DATABASE_URL=postgresql://test_user:test_pass@localhost:5432/test_xaeframe
PYTEST_PARALLEL_WORKERS=4
COVERAGE_THRESHOLD=80

# DEPLOYMENT & SCALING
MAX_WORKERS=4
WORKER_TIMEOUT=120
GRACEFUL_TIMEOUT=30
KEEP_ALIVE=5

# Resource Limits
MAX_MEMORY_MB=2048
MAX_CPU_PERCENT=80

# FEATURE FLAGS
FEATURE_MULTI_DOMAIN=true  # Enable finance/insurance adaptations
FEATURE_ADVANCED_EXPLANATIONS=true
FEATURE_REAL_TIME_LEARNING=false  # Experimental
FEATURE_A_B_TESTING=true

# NOTES
# - Never commit .env to version control
# - Use strong passwords in production
# - Rotate secrets regularly
# - Review and adjust resource limits based on your infrastructure
